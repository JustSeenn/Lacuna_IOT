# Node-RED-Dashboard Charts
We display the data from the sensors on a chart in order to visualize them as a function of time. 

## Code 

  [{"id":"55276915.b6b808","type":"tab","label":"Chart","disabled":false,"info":""},{"id":"d4f89fbf.c4394","type":"function","z":"55276915.b6b808","name":"","func":"var m = {};\nvar labels = []\nvar data = []\nvar time = [];\nvar time2 = [];\nvar hour=[],minutes=[],second=[];\nvar analog = [] ,luminosity = [],humidity=[],temperature=[];\n\nfor(i=0;i<msg.payload.length;i++){\nvar d = new Date(msg.payload[i].time);\nluminosity[i] = parseInt(msg.payload[i].Lum_ext);\nhumidity[i] = parseInt(msg.payload[i].H_ext);\ntemperature[i] = parseInt(msg.payload[i].T_ext);\n\ntime[i] = msg.payload[i].time;\nhour[i] = d.getHours(msg.payload[i].time);\nminutes[i] = d.getMinutes(msg.payload[i].time);\nsecond[i] = d.getSeconds(msg.payload[i].time);\ntime2[i] = hour[i] +\"h\"+ minutes[i] +\"min\" + second[i] + \"s\";\n}\n    m.series = [\"Luminosity\",\"Humidity\",\"Temperature\"];\n    m.data = [luminosity,humidity,temperature];\n    m.labels = time2;\nreturn {\n    payload:[m] ,\n    topic : msg.topic\n   \n    \n};","outputs":1,"noerr":0,"x":830,"y":60,"wires":[["cc868858.646ef8"]]},{"id":"fc53b31d.74bee","type":"influxdb in","z":"55276915.b6b808","influxdb":"ac69b075.a9d24","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":670,"y":60,"wires":[["d4f89fbf.c4394"]]},{"id":"ad4a6d0c.15611","type":"function","z":"55276915.b6b808","name":"","func":"msg.query =\"select * from Sensors_ext order by time DESC limit 20\" ;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":60,"wires":[["fc53b31d.74bee"]]},{"id":"43bd8fce.62c75","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":1,"width":0,"height":0,"passthru":false,"label":"Capteur_ext","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":530,"y":20,"wires":[["ad4a6d0c.15611","ba96b160.013ec"]]},{"id":"a2bff448.d2d748","type":"change","z":"55276915.b6b808","name":"","rules":[{"t":"set","p":"toto","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":170,"y":200,"wires":[["fbfdf74d.8db098"]]},{"id":"f234512b.74976","type":"function","z":"55276915.b6b808","name":"","func":"if(msg.payload===null){\n    msg.payload=1;\n}\nmsg.payload =msg.payload*100;\nreturn msg;","outputs":1,"noerr":0,"x":170,"y":240,"wires":[["a2bff448.d2d748"]]},{"id":"bb1b2fd7.662a6","type":"function","z":"55276915.b6b808","name":"","func":"var m = {};\nvar labels = []\nvar data = []\nvar time = [];\nvar time2 = [];\nvar hour=[],minutes=[],second=[];\nvar analog = [] ,luminosity = [],humidity=[],temperature=[];\n\nfor(i=0;i<msg.payload.length;i++){\nvar d = new Date(msg.payload[i].time);\nluminosity[i] = parseInt(msg.payload[i].Lum_int);\nhumidity[i] = parseInt(msg.payload[i].H_int);\ntemperature[i] = parseInt(msg.payload[i].T_int);\n\ntime[i] = msg.payload[i].time;\nhour[i] = d.getHours(msg.payload[i].time);\nminutes[i] = d.getMinutes(msg.payload[i].time);\nsecond[i] = d.getSeconds(msg.payload[i].time);\ntime2[i] = hour[i] +\"h\"+ minutes[i] +\"min\" + second[i] + \"s\";\n}\n    m.series = [\"Luminosity\",\"Humidity\",\"Temperature\"];\n    m.data = [luminosity,humidity,temperature];\n    m.labels = time2;\nreturn {\n    payload:[m] ,\n    topic : msg.topic\n    \n};","outputs":1,"noerr":0,"x":830,"y":180,"wires":[["cc868858.646ef8"]]},{"id":"cc1307ca.f9c208","type":"influxdb in","z":"55276915.b6b808","influxdb":"ac69b075.a9d24","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":670,"y":160,"wires":[["bb1b2fd7.662a6"]]},{"id":"50678c27.d05c74","type":"function","z":"55276915.b6b808","name":"","func":"msg.query =\"select * from Sensors_int order by time DESC limit 20\";\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":160,"wires":[["cc1307ca.f9c208"]]},{"id":"bef6fd0.f8677","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":2,"width":0,"height":0,"passthru":false,"label":"Capteur_int","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":530,"y":120,"wires":[["50678c27.d05c74","1a85bb3e.6c0385"]]},{"id":"cc868858.646ef8","type":"ui_chart","z":"55276915.b6b808","name":"","group":"cf928aa.09eed78","order":2,"width":0,"height":0,"label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1210,"y":220,"wires":[[]]},{"id":"d56c29cb.e030b8","type":"function","z":"55276915.b6b808","name":"","func":"var m = {};\nvar labels = []\nvar data = []\nvar time = [];\nvar time2 = [];\nvar hour=[],minutes=[],second=[];\nvar analog = [] ,luminosity = [],humidity=[],temperature=[];\n\nfor(i=0;i<msg.payload.length;i++){\nvar d = new Date(msg.payload[i].time);\nluminosity[i] = parseInt(msg.payload[i].Lum_serre);\nhumidity[i] = parseInt(msg.payload[i].H_serre);\ntemperature[i] = parseInt(msg.payload[i].T_serre);\n\ntime[i] = msg.payload[i].time;\nhour[i] = d.getHours(msg.payload[i].time);\nminutes[i] = d.getMinutes(msg.payload[i].time);\nsecond[i] = d.getSeconds(msg.payload[i].time);\ntime2[i] = hour[i] +\"h\"+ minutes[i] +\"min\" + second[i] + \"s\";\n}\n    m.series = [\"Luminosity\",\"Humidity\",\"Temperature\"];\n    m.data = [luminosity,humidity,temperature];\n    m.labels = time2;\nreturn {\n    payload:[m] ,\n    topic : msg.topic\n    \n};","outputs":1,"noerr":0,"x":830,"y":260,"wires":[["cc868858.646ef8"]]},{"id":"5d30839.6d77c7c","type":"influxdb in","z":"55276915.b6b808","influxdb":"ac69b075.a9d24","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":670,"y":260,"wires":[["d56c29cb.e030b8"]]},{"id":"abc828f7.42fa88","type":"function","z":"55276915.b6b808","name":"","func":"msg.query =\"select * from Sensors_Serre order by time DESC limit 20\" ;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":260,"wires":[["5d30839.6d77c7c"]]},{"id":"325b84dd.d3c20c","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":3,"width":0,"height":0,"passthru":false,"label":"Capteur_Serre","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":540,"y":220,"wires":[["abc828f7.42fa88","1699fe3c.910d02"]]},{"id":"6b11233f.8e08ac","type":"function","z":"55276915.b6b808","name":"","func":"var m = {};\nvar labels = []\nvar data = []\nvar time = [];\nvar time2 = [];\nvar hour=[],minutes=[],second=[];\nvar analog = [] ,luminosity = [],humidity=[],temperature=[];\n\nfor(i=0;i<msg.payload.length;i++){\nvar d = new Date(msg.payload[i].time);\nluminosity[i] = parseInt(msg.payload[i].Lum_toto);\nhumidity[i] = parseInt(msg.payload[i].H_toto);\ntemperature[i] = parseInt(msg.payload[i].T_toto);\n\ntime[i] = msg.payload[i].time;\nhour[i] = d.getHours(msg.payload[i].time);\nminutes[i] = d.getMinutes(msg.payload[i].time);\nsecond[i] = d.getSeconds(msg.payload[i].time);\ntime2[i] = hour[i] +\"h\"+ minutes[i] +\"min\" + second[i] + \"s\";\n}\n    m.series = [\"Luminosity\",\"Humidity\",\"Temperature\"];\n    m.data = [luminosity,humidity,temperature];\n    m.labels = time2;\nreturn {\n    payload:[m] ,\n    topic : msg.topic\n    \n};","outputs":1,"noerr":0,"x":830,"y":360,"wires":[["cc868858.646ef8"]]},{"id":"234d96da.79a7aa","type":"influxdb in","z":"55276915.b6b808","influxdb":"ac69b075.a9d24","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":670,"y":360,"wires":[["6b11233f.8e08ac"]]},{"id":"dece252d.469ba8","type":"function","z":"55276915.b6b808","name":"","func":"msg.query =\"select * from Sensors_toto order by time DESC limit 20\" ;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":360,"wires":[["234d96da.79a7aa"]]},{"id":"4aaa8b88.8d3004","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":4,"width":0,"height":0,"passthru":false,"label":"Capteur_toto","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":530,"y":320,"wires":[["dece252d.469ba8","4c9b6881.c1bba8"]]},{"id":"3ef0e30f.5b75cc","type":"function","z":"55276915.b6b808","name":"","func":"var m = {};\nvar labels = []\nvar data = []\nvar time = [];\nvar time2 = [];\nvar hour=[],minutes=[],second=[];\nvar analog = [] ,luminosity = [],humidity=[],temperature=[];\n\nfor(i=0;i<msg.payload.length;i++){\nvar d = new Date(msg.payload[i].time);\nluminosity[i] = parseInt(msg.payload[i].Lum_smartcampus);\nhumidity[i] = parseInt(msg.payload[i].H_smartcampus);\ntemperature[i] = parseInt(msg.payload[i].T_smartcampus);\n\ntime[i] = msg.payload[i].time;\nhour[i] = d.getHours(msg.payload[i].time);\nminutes[i] = d.getMinutes(msg.payload[i].time);\nsecond[i] = d.getSeconds(msg.payload[i].time);\ntime2[i] = hour[i] +\"h\"+ minutes[i] +\"min\" + second[i] + \"s\";\n}\n    m.series = [\"Luminosity\",\"Humidity\",\"Temperature\"];\n    m.data = [luminosity,humidity,temperature];\n    m.labels = time2;\nreturn {\n    payload:[m] ,\n    topic : msg.topic\n    \n};","outputs":1,"noerr":0,"x":830,"y":460,"wires":[["cc868858.646ef8"]]},{"id":"218f733e.31a32c","type":"influxdb in","z":"55276915.b6b808","influxdb":"ac69b075.a9d24","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":670,"y":460,"wires":[["3ef0e30f.5b75cc"]]},{"id":"65ce7af5.fdfc64","type":"function","z":"55276915.b6b808","name":"","func":"msg.query =\"select * from Sensors_smartcampus order by time DESC limit 20\";\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":460,"wires":[["218f733e.31a32c"]]},{"id":"2246defd.ea9652","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":5,"width":0,"height":0,"passthru":false,"label":"Capteur_smartcampus","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":560,"y":420,"wires":[["65ce7af5.fdfc64","19f98488.dc84cb"]]},{"id":"a81caece.93d69","type":"inject","z":"55276915.b6b808","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":220,"y":60,"wires":[["ad4a6d0c.15611"]]},{"id":"20f4cc2a.df1954","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":7,"width":0,"height":0,"passthru":false,"label":"Clear","tooltip":"","color":"","bgcolor":"","icon":"","payload":"[]","payloadType":"json","topic":"","x":810,"y":620,"wires":[["cc868858.646ef8"]]},{"id":"8babafb3.cbdad","type":"function","z":"55276915.b6b808","name":"","func":"msg.query =\"select * from dist order by time desc limit 50\"\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":560,"wires":[["2aee08de.c5a018"]]},{"id":"2aee08de.c5a018","type":"influxdb in","z":"55276915.b6b808","influxdb":"ac69b075.a9d24","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":650,"y":560,"wires":[["385b6857.6e78f8"]]},{"id":"385b6857.6e78f8","type":"function","z":"55276915.b6b808","name":"","func":"var m = {};\nvar labels = []\nvar data = [];\nvar series = []\nvar i=0;\nvar j=0;\nvar a;\nwhile(i<msg.payload.length-1){\n    if(msg.payload[i+1].RSSI !== null && msg.payload[i].alt!==null){\n      data[j] = msg.payload[i+1].RSSI;\n      labels[j] = parseInt(msg.payload[i].alt/1000);\n      j++;\n      i++;}\nelse{ i++;}}\n\nfor(i=0;i<labels.length;i++){\n    for(j=0;j<labels.length-i-1;j++){\n        if(labels[j]>labels[j+1]){\n            a=labels[j];\n            labels[j]=labels[j+1];\n            labels[j+1]=a;\n            a=data[j];\n            data[j]=data[j+1];\n            data[j+1]=a;\n            \n        }\n    }\n}\n\n\n    m.series = 'X';\n    m.labels = labels;\n    m.data = [data];\n    m.size = '24x24';\n\nreturn {\n    payload:[m] ,\n    topic : msg.topic\n    \n};\n","outputs":1,"noerr":0,"x":810,"y":560,"wires":[["cc868858.646ef8"]]},{"id":"81fc7310.28c6b","type":"ui_button","z":"55276915.b6b808","name":"","group":"71d71016.b48c","order":6,"width":0,"height":0,"passthru":false,"label":"RFID/Elevation","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":520,"y":520,"wires":[["8babafb3.cbdad"]]},{"id":"fbfdf74d.8db098","type":"debug","z":"55276915.b6b808","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":180,"y":140,"wires":[]},{"id":"b96f1305.aa61c","type":"ui_text","z":"55276915.b6b808","group":"cf928aa.09eed78","order":1,"width":0,"height":0,"name":"","label":"Nom Chart","format":"{{msg.text}}","layout":"row-spread","x":1240,"y":180,"wires":[]},{"id":"ba96b160.013ec","type":"function","z":"55276915.b6b808","name":"","func":"msg.text = \"Capteur_ext\"\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":20,"wires":[["b96f1305.aa61c"]]},{"id":"1a85bb3e.6c0385","type":"function","z":"55276915.b6b808","name":"","func":"msg.text = \"Capteur_int\"\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":120,"wires":[["b96f1305.aa61c"]]},{"id":"1699fe3c.910d02","type":"function","z":"55276915.b6b808","name":"","func":"msg.text = \"Capteur_Serre\"\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":220,"wires":[["b96f1305.aa61c"]]},{"id":"4c9b6881.c1bba8","type":"function","z":"55276915.b6b808","name":"","func":"msg.text = \"Capteur_toto\"\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":320,"wires":[["b96f1305.aa61c"]]},{"id":"19f98488.dc84cb","type":"function","z":"55276915.b6b808","name":"","func":"msg.text = \"Capteur_smartcampus\"\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":420,"wires":[["b96f1305.aa61c"]]},{"id":"ac69b075.a9d24","type":"influxdb","z":"","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"Sensor_IOT","name":"Sensor_iOT","usetls":false,"tls":""},{"id":"71d71016.b48c","type":"ui_group","z":"","name":"Input","tab":"174efa6f.eb1176","order":1,"disp":true,"width":"6","collapse":false},{"id":"cf928aa.09eed78","type":"ui_group","z":"","name":"Print","tab":"174efa6f.eb1176","order":2,"disp":true,"width":"25","collapse":false},{"id":"174efa6f.eb1176","type":"ui_tab","z":"","name":"Chart_v","icon":"dashboard","disabled":false,"hidden":false}]
